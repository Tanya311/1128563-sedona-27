var KEY_CODE_ESC=27,buttonOpenForm=document.querySelector(".popup-open"),popup=document.querySelector(".search-form"),numberOfAdults=popup.querySelector("[name=number-of-adults]"),numberOfChild=popup.querySelector("[name=number-of-child]"),dateOfArrival=popup.querySelector("[name=date-of-arrival]"),dateOfDeparture=popup.querySelector("[name=date-of-departure]"),isStorageSupport=!0,storageAdults="",storageChildren="";popup.classList.add("search-form--close");try{storageAdults=localStorage.getItem("number-of-adults"),storageChildren=localStorage.getItem("number-of-child")}catch(e){isStorageSupport=!1}buttonOpenForm.addEventListener("click",function(e){popup.classList.toggle("search-form--open"),popup.classList.toggle("search-form--close"),popup.classList.remove("search-form--error"),popup.classList.contains("search-form--open")&&dateOfArrival.focus(),storageAdults&&(numberOfAdults.value=storageAdults),storageChildren&&(numberOfChild.value=storageChildren)}),window.addEventListener("keydown",function(e){e.keyCode===KEY_CODE_ESC&&popup.classList.contains("search-form--open")&&(popup.classList.remove("search-form--open"),popup.classList.add("search-form--close"),popup.classList.remove("search-form--error"))}),popup.addEventListener("submit",function(e){dateOfArrival.value&&dateOfDeparture.value&&numberOfAdults.value&&numberOfChild.value?isStorageSupport&&(localStorage.setItem("number-of-adults",numberOfAdults.value),localStorage.setItem("number-of-child",numberOfChild.value)):(e.preventDefault(),popup.classList.remove("search-form--error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("search-form--error"))});
